#!/bin/bash

sudo killall -r wpa_supplicant

if [ $#1 -lt 1 ]; then
	echo "please put ID"
	exit
fi

sudo ip link set wlp6s0 up

ID=$1
PASS=$2

if [ ${#PASS} -lt 1 ]; then # if no password
	sudo iw wlp6s0 connect $ID
elif [ ${#PASS} -lt 8 ]; then # if password-length < 8
	sudo iw wlp6s0 connect ${ID} key 0:${PASS}
else
	echo "ctrl_interface=/var/run/wpa_supplicant GROUP=wheel" > /etc/wpa_supplicant/wpa_supplicant.conf
	sudo wpa_passphrase ${ID} ${PASS} /etc/wpa_supplicant/wpa_supplicant.conf >> /etc/wpa_supplicant/wpa_supplicant.conf
	sudo wpa_supplicant -B -Dwext -iwlp6s0 -c /etc/wpa_supplicant/wpa_supplicant.conf
fi
